# 拔线（baxian）

通过悬浮窗按钮对**指定目标应用**进行“短时断网”（默认 1 秒），用于网络抖动/断线测试等场景。

## 功能
- 选择目标应用（仅影响该应用网络）
- 启动悬浮窗按钮
- 点击悬浮按钮：对目标应用断网约 1 秒后自动恢复
- 断网过程中再次点击：立即恢复网络
- 悬浮按钮颜色状态提示：绿=正常，红=断网中

## 默认目标
首次启动若未设置目标应用，会尝试自动选择 **炉石传说**（按已安装包名匹配，例如：
`com.blizzard.wtcg.hearthstone.cn.dashen` 等）。如果设备未安装则不设置，仍可手动选择。

## 原理说明（简要）
使用 `VpnService.Builder#addAllowedApplication()` 将 VPN 仅作用于目标应用，
并将其路由到一个不转发的本地 TUN（黑洞），从而实现“只断某个 App 的网”。

## 权限说明
- 悬浮窗权限：用于显示悬浮按钮
- VPN 权限：用于创建本地 VPN
- 通知权限（Android 13+）：前台服务通知

## 使用方法
1. 打开 App，选择目标应用（可选）
2. 点击“启动悬浮窗”
3. 在桌面/任意界面点击悬浮按钮即可触发断网

## 注意事项
- 该工具仅用于测试/自用场景，请勿用于影响他人或违反服务条款的用途
- 部分 ROM/系统可能对后台/前台服务有更严格限制，如遇到悬浮窗消失或服务被杀，请在系统设置中给予后台运行权限

## 许可证
本项目采用 MIT License 开源，详见 [LICENSE](LICENSE)。
